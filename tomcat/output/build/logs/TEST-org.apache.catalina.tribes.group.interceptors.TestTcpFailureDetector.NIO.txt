Testsuite: org.apache.catalina.tribes.group.interceptors.TestTcpFailureDetector
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 21,688 sec
------------- Standard Output ---------------
testTcpMcastFail()
Channel-2:member added[Channel-1]
Channel-1:member added[Channel-2]
Channel-2:member disappeared[Channel-1]
testTcpFailureMemberAdd()
Channel-2:member added[Channel-1]
testTcpSendFailureMemberDrop()
Channel-2:member added[Channel-1]
Channel-1:member added[Channel-2]
Channel-1:member disappeared[Channel-2]
------------- ---------------- ---------------
------------- Standard Error -----------------
Okt 05, 2017 3:16:55 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4000
Okt 05, 2017 3:16:55 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:16:55 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:16:56 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:16:56 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:16:57 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:16:57 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4001
Okt 05, 2017 3:16:57 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:16:57 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:16:58 PM org.apache.catalina.tribes.io.BufferPool getBufferPool
INFORMATION: Created a buffer pool with max size:104857600 bytes of type:org.apache.catalina.tribes.io.BufferPool15Impl
Okt 05, 2017 3:16:58 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:16:58 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:16:59 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:17:02 PM org.apache.catalina.tribes.group.interceptors.TcpFailureDetector memberDisappeared
INFORMATION: Received memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{192, 168, 86, 1}:4001,{192, 168, 86, 1},4001, alive=1516,id={124 53 105 -16 34 -108 75 50 -86 46 104 -37 -20 21 -42 110 }, payload={67 104 97 110 110 101 108 45 50 ...(9)}, command={}, domain={-95 -30 -25 -117 -66 4 72 -101 -116 ...(16)}, ]] message. Will verify.
Okt 05, 2017 3:17:02 PM org.apache.catalina.tribes.group.interceptors.TcpFailureDetector memberDisappeared
INFORMATION: Verification complete. Member still alive[org.apache.catalina.tribes.membership.MemberImpl[tcp://{192, 168, 86, 1}:4001,{192, 168, 86, 1},4001, alive=1516,id={124 53 105 -16 34 -108 75 50 -86 46 104 -37 -20 21 -42 110 }, payload={67 104 97 110 110 101 108 45 50 ...(9)}, command={}, domain={-95 -30 -25 -117 -66 4 72 -101 -116 ...(16)}, ]]
Okt 05, 2017 3:17:04 PM org.apache.catalina.tribes.group.interceptors.TcpFailureDetector memberDisappeared
INFORMATION: Verification complete. Member disappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{192, 168, 86, 1}:4000,{192, 168, 86, 1},4000, alive=9078,id={32 6 -81 35 63 -25 74 109 -110 109 -111 -21 -113 -105 -35 -90 }, payload={67 104 97 110 110 101 108 45 49 ...(9)}, command={66 65 66 89 45 65 76 69 88 ...(9)}, domain={-95 -30 -25 -117 -66 4 72 -101 -116 ...(16)}, ]]
Okt 05, 2017 3:17:04 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4000
Okt 05, 2017 3:17:04 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:17:04 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:17:06 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:17:06 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:17:07 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:17:07 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4001
Okt 05, 2017 3:17:07 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:17:07 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:17:08 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:17:08 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:17:09 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:17:09 PM org.apache.catalina.tribes.membership.McastServiceImpl$ReceiverThread run
WARNUNG: Error receiving mcast package. Sleeping 500ms
java.net.SocketException: socket closed
	at java.net.TwoStacksPlainDatagramSocketImpl.receive0(Native Method)
	at java.net.TwoStacksPlainDatagramSocketImpl.receive(TwoStacksPlainDatagramSocketImpl.java:114)
	at java.net.DatagramSocket.receive(DatagramSocket.java:812)
	at org.apache.catalina.tribes.membership.McastServiceImpl.receive(McastServiceImpl.java:314)
	at org.apache.catalina.tribes.membership.McastServiceImpl$ReceiverThread.run(McastServiceImpl.java:414)

Okt 05, 2017 3:17:09 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4000
Okt 05, 2017 3:17:09 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:17:09 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:17:10 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:17:10 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:17:11 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:17:11 PM org.apache.catalina.tribes.transport.ReceiverBase bind
INFORMATION: Receiver Server Socket bound to:/192.168.86.1:4001
Okt 05, 2017 3:17:11 PM org.apache.catalina.tribes.membership.McastServiceImpl setupSocket
INFORMATION: Setting cluster mcast soTimeout to 500
Okt 05, 2017 3:17:11 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:4
Okt 05, 2017 3:17:12 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:4
Okt 05, 2017 3:17:12 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Sleeping for 1000 milliseconds to establish cluster membership, start level:8
Okt 05, 2017 3:17:13 PM org.apache.catalina.tribes.membership.McastServiceImpl waitForMembers
INFORMATION: Done sleeping, membership established, start level:8
Okt 05, 2017 3:17:14 PM org.apache.catalina.tribes.transport.nio.ParallelNioSender doLoop
WARNUNG: Member send is failing for:tcp://{192, 168, 86, 1}:4001 ; Setting to suspect and retrying.
Okt 05, 2017 3:17:16 PM org.apache.catalina.tribes.group.interceptors.TcpFailureDetector memberDisappeared
INFORMATION: Received memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{192, 168, 86, 1}:4001,{192, 168, 86, 1},4001, alive=4618,id={-1 -79 95 -98 61 44 68 27 -115 18 -10 -33 -4 -112 -15 86 }, payload={67 104 97 110 110 101 108 45 50 ...(9)}, command={}, domain={126 76 50 -46 65 93 73 -82 -120 ...(16)}, ]] message. Will verify.
Okt 05, 2017 3:17:17 PM org.apache.catalina.tribes.group.interceptors.TcpFailureDetector memberDisappeared
INFORMATION: Verification complete. Member disappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{192, 168, 86, 1}:4001,{192, 168, 86, 1},4001, alive=5633,id={-1 -79 95 -98 61 44 68 27 -115 18 -10 -33 -4 -112 -15 86 }, payload={67 104 97 110 110 101 108 45 50 ...(9)}, command={}, domain={126 76 50 -46 65 93 73 -82 -120 ...(16)}, ]]
------------- ---------------- ---------------

Testcase: testTcpMcastFail took 9,359 sec
Testcase: testTcpFailureMemberAdd took 4,121 sec
Testcase: testTcpSendFailureMemberDrop took 8,193 sec
